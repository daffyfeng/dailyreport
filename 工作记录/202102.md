### 0219 Observable转换成BehaviorSubject

***BehaviorSubject*** 被订阅时候，能够返回最新值，方便用来在不同组件之间进行数据共享。behavior保留了发送给消费者的最新一次数据，每当有消费者订阅他的时候，就会把最新值返回给消费者

现在使用Observable通过http请求数据，不同的component中需要使用这个数据，则需要将Observable转换为subject

```javascript
import { Observable, BehaviorSubject } from 'rxjs';

export function convertObservableToBehaviorSubject<T>(observable: Observable<T>, initValue: T): BehaviorSubject<T> {
    const subject = new BehaviorSubject(initValue);

    observable.subscribe({
        complete: () => subject.complete(),
        error: x => subject.error(x),
        next: x => subject.next(x)
    });

    return subject;
}
```
[rxjs学习中文网站](https://cn.rx.js.org/manual/overview.html)


### 0226 Angular路由

[Angular复习笔记7-路由（下）](https://www.cnblogs.com/pangjianxin/p/10905070.html)

当Angular在处理同一页面内跳转时，不会重新创建组件的实例，所以组件的构造函数和ngOnInit（）方法都没有被调用到。

为了解决这个问题，ActivatedRoute服务提供了一个Observable对象，允许对参数的更新进行订阅。
```typescript
this.activatedRoute.queryParams.subscribe((params) => {
  const spaceName = params.workspace;
  ...
});
```
